# =============================================================================
# Nova‑XFinity AI - Environment Variables Configuration
# =============================================================================
# Copy this file to .env in the project root and fill in the values
# Generate secure secrets using: openssl rand -hex 32
# =============================================================================

# -----------------------------------------------------------------------------
# DATABASE CONFIGURATION
# -----------------------------------------------------------------------------
# PostgreSQL database connection for FastAPI authentication backend
DATABASE_URL=postgresql+asyncpg://postgres:postgres@nova-xfinity-db:5432/nova_xfinity_auth

# PostgreSQL credentials (used by Docker Compose and Node.js backend)
POSTGRES_USER=postgres # Database username
POSTGRES_PASSWORD=postgres # Database password (change in production!)
POSTGRES_DB=finity_auth # Database name for FastAPI auth backend

# Node.js backend database connection (optional, defaults to same DB if not set)
NODE_DATABASE_URL=postgresql://postgres:postgres@nova-xfinity-db:5432/finity_db

# -----------------------------------------------------------------------------
# JWT & AUTHENTICATION SECRETS
# -----------------------------------------------------------------------------
# Main JWT secret for signing access and refresh tokens (REQUIRED)
# Generate with: openssl rand -hex 32
SECRET=__REQUIRED__

# Email verification token secret (REQUIRED)
# Generate with: openssl rand -hex 32
USERS_VERIFICATION_TOKEN_SECRET=__REQUIRED__

# Password reset token secret (REQUIRED)
# Generate with: openssl rand -hex 32
USERS_RESET_PASSWORD_TOKEN_SECRET=__REQUIRED__

# -----------------------------------------------------------------------------
# CORS CONFIGURATION
# -----------------------------------------------------------------------------
# Allowed origins for FastAPI backend (comma-separated)
BACKEND_CORS_ORIGINS=http://localhost:3000,http://localhost:5173

# CORS origins for Node.js backend (comma-separated list)
# Development origins:
#   - http://localhost:3000 (Frontend dev server)
#   - http://localhost:3001 (Node backend - if needed for direct access)
#   - http://localhost:10000 (WordPress plugin local)
# Production origins:
#   - https://ogcnewfinity.com
#   - https://www.ogcnewfinity.com
#   - https://api.ogcnewfinity.com
CORS_ORIGINS=http://localhost:3000,http://localhost:3001,http://localhost:10000,http://127.0.0.1:3000,https://ogcnewfinity.com

# Alternative CORS origin variable (single origin - used as fallback)
# For Node.js backend - if CORS_ORIGINS is not set, this will be used
CORS_ORIGIN=http://localhost:3000

# Enable CORS request logging (set to 'true' for debugging)
# Logs all CORS requests including blocked origins for security monitoring
ENABLE_CORS_LOGS=false

# Frontend API URL (used by Vite proxy configuration)
VITE_API_URL=http://localhost:3001

# -----------------------------------------------------------------------------
# PORT CONFIGURATION
# -----------------------------------------------------------------------------
# FastAPI authentication backend port
FASTAPI_PORT=8000 # Port for FastAPI authentication backend

# Node.js backend port
NODE_PORT=3001 # Port for Node.js feature backend
NODE_BACKEND_PORT=3001 # Alternative variable name (used in Docker Compose)

# Node environment (development, production, test)
NODE_ENV=development # Environment mode: development, production, or test

# -----------------------------------------------------------------------------
# FRONTEND CONFIGURATION
# -----------------------------------------------------------------------------
# Frontend URL for email links and OAuth redirects
FRONTEND_URL=http://localhost:3000 # Base URL of the frontend application

# API URL for frontend (Vite reads from root .env)
VITE_API_URL=http://localhost:8000 # URL of the FastAPI backend used by frontend

# Subscription API URL (Node.js backend)
VITE_SUBSCRIPTION_API_URL=http://localhost:8000 # URL of the Node.js backend for subscriptions

# Optional: Node.js backend API URL (used in admin dashboard)
VITE_NODE_API_URL=http://localhost:3001 # URL of the Node.js backend for API calls

# -----------------------------------------------------------------------------
# ADMIN USER CONFIGURATION
# -----------------------------------------------------------------------------
# Initial admin user credentials (REQUIRED for first setup)
ADMIN_EMAIL=__REQUIRED__ # Email address for the initial admin user
ADMIN_PASSWORD=__REQUIRED__ # Password for the initial admin user

# -----------------------------------------------------------------------------
# EMAIL/SMTP CONFIGURATION
# -----------------------------------------------------------------------------
# SMTP server settings (REQUIRED for email verification and password reset)
SMTP_HOST=__REQUIRED__ # SMTP server hostname (e.g., smtp.gmail.com)
SMTP_PORT=587 # SMTP server port (587 for TLS, 465 for SSL)
SMTP_USERNAME=__REQUIRED__ # SMTP username (usually your email address)
SMTP_PASSWORD=__REQUIRED__ # SMTP password (use App Password if 2FA is enabled)

# Email sender configuration
EMAILS_FROM_EMAIL=__REQUIRED__ # Email address to send from
EMAILS_FROM_NAME=Nova‑XFinity Support # Display name for sent emails
EMAILS_ENABLED=true # Enable/disable email functionality

# Alternative email service variables (for Node.js backend)
EMAIL_API_KEY= # Resend API key (optional - for email service in Node.js backend)
RESEND_API_KEY= # Alternative Resend API key variable (optional)
EMAIL_FROM=noreply@nova-xfinity.ai # Default from email for Node.js backend
EMAIL_FROM_NAME=Nova‑XFinity AI # Default from name for Node.js backend

# -----------------------------------------------------------------------------
# AI PROVIDER API KEYS
# -----------------------------------------------------------------------------
# Google Gemini API Key (REQUIRED - primary AI provider)
# Get from: https://aistudio.google.com/app/apikey
GEMINI_API_KEY=__REQUIRED__

# OpenAI API Key (Optional - for GPT models)
# Get from: https://platform.openai.com/api-keys
OPENAI_API_KEY=

# Anthropic Claude API Key (Optional - for Claude models)
# Get from: https://console.anthropic.com/account/keys
ANTHROPIC_API_KEY=

# Groq API Key (Optional - for Llama/Groq provider)
# Get from: https://console.groq.com/keys
GROQ_API_KEY=

# Default AI Provider (if not set, defaults to 'gemini')
# Options: gemini, openai, anthropic, llama
DEFAULT_AI_PROVIDER=gemini

# SECURITY: API keys should NEVER be exposed to frontend via VITE_ prefix
# All AI provider API calls must go through backend endpoints
# DO NOT set VITE_GEMINI_API_KEY or any VITE_ prefixed API key variables

# -----------------------------------------------------------------------------
# ADDITIONAL AI PROVIDER API KEYS (Optional - for WordPress plugin integration)
# -----------------------------------------------------------------------------
# These keys are used by the WordPress plugin for additional AI services
REPLICATE_API_KEY= # Replicate API key (optional - for image/video generation via Replicate)
STABILITY_API_KEY= # Stability AI API key (optional - for image generation via Stability AI)
PINECONE_API_KEY= # Pinecone API key (optional - for vector database operations)
WEAVIATE_API_KEY= # Weaviate API key (optional - for vector database operations)
PLATFORM_API_KEY= # Platform API key (optional - for WordPress plugin token sync)

# -----------------------------------------------------------------------------
# OAUTH CONFIGURATION (Optional - for social login)
# -----------------------------------------------------------------------------
# Google OAuth - Get credentials from https://console.cloud.google.com/
# Required scopes: openid email profile
# Authorized redirect URI: http://localhost:8000/auth/google/callback (dev)
#                         https://yourdomain.com/auth/google/callback (prod)
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
GOOGLE_REDIRECT_URI= # Optional: If not set, will use dynamic redirect URI from request
                    # Recommended: Set explicitly in production to prevent open redirect issues

# Discord OAuth - Get credentials from https://discord.com/developers/applications
# Required scopes: identify email
# Redirect URI: http://localhost:8000/auth/discord/callback (dev)
#              https://yourdomain.com/auth/discord/callback (prod)
DISCORD_CLIENT_ID=
DISCORD_CLIENT_SECRET=
DISCORD_REDIRECT_URI= # Optional: If not set, will use dynamic redirect URI from request
                     # Recommended: Set explicitly in production to prevent open redirect issues

# Twitter/X OAuth - Get credentials from https://developer.twitter.com/
# Note: Twitter OAuth 2.0 requires custom implementation (not yet implemented)
TWITTER_CLIENT_ID=
TWITTER_CLIENT_SECRET=

# -----------------------------------------------------------------------------
# STRIPE CONFIGURATION (Optional - for subscriptions)
# -----------------------------------------------------------------------------
# Get credentials from: https://dashboard.stripe.com/
# If not set, Stripe features will be unavailable
STRIPE_SECRET_KEY= # Stripe secret key (starts with sk_)
STRIPE_WEBHOOK_SECRET= # Webhook signing secret (starts with whsec_)
STRIPE_PRICE_ID_PRO= # Stripe price ID for Pro plan
STRIPE_PRICE_ID_ENTERPRISE= # Stripe price ID for Enterprise plan

# Token Purchase Price IDs (Required if token purchase feature is enabled)
# Create products in Stripe Dashboard for each token pack size
STRIPE_PRICE_ID_TOKEN_SMALL= # Stripe price ID for Small token pack ($5 - 100 tokens)
STRIPE_PRICE_ID_TOKEN_MEDIUM= # Stripe price ID for Medium token pack ($20 - 500 tokens + 50 bonus)
STRIPE_PRICE_ID_TOKEN_LARGE= # Stripe price ID for Large token pack ($50 - 1,500 tokens + 200 bonus)
STRIPE_PRICE_ID_TOKEN_XLARGE= # Stripe price ID for Extra Large token pack ($100 - 3,500 tokens + 500 bonus)

# Note: STRIPE_WEBHOOK_SECRET is provided by Stripe CLI when running `stripe listen`
# For local development, run: stripe listen --forward-to localhost:3001/api/webhooks/stripe
# Then copy the webhook signing secret (starts with whsec_...) to this variable
#
# Production Webhook Setup:
# 1. Go to Stripe Dashboard > Developers > Webhooks
# 2. Add endpoint: https://yourdomain.com/api/webhooks/stripe
# 3. Select events: checkout.session.completed, customer.subscription.*, invoice.payment.*
# 4. Copy webhook signing secret to STRIPE_WEBHOOK_SECRET

# -----------------------------------------------------------------------------
# PAYPAL CONFIGURATION (Optional - for subscriptions)
# -----------------------------------------------------------------------------
# Get credentials from: https://developer.paypal.com/
# If not set, PayPal features will be unavailable
PAYPAL_CLIENT_ID= # PayPal client ID
PAYPAL_CLIENT_SECRET= # PayPal client secret
PAYPAL_MODE=sandbox # PayPal mode: sandbox or live
PAYPAL_PLAN_ID_PRO= # PayPal plan ID for Pro subscription
PAYPAL_PLAN_ID_ENTERPRISE= # PayPal plan ID for Enterprise subscription
PAYPAL_WEBHOOK_ID= # PayPal webhook ID for verifying webhook events

# Note: Get PAYPAL_WEBHOOK_ID from PayPal Developer Dashboard > My Apps & Credentials > Webhooks

# -----------------------------------------------------------------------------
# OPTIONAL FEATURES & FLAGS
# -----------------------------------------------------------------------------
# Enable test endpoints (only for development)
ENABLE_TEST_ENDPOINTS=false # Set to 'true' to enable test endpoints like /email/test

# Enable cron jobs for scheduled tasks
ENABLE_CRON_JOBS=true # Set to 'false' to disable cron jobs

# Run usage reset job on startup (for testing)
RUN_USAGE_RESET_ON_STARTUP=false # Set to 'true' to run usage reset on application startup

# =============================================================================
# NOTES
# =============================================================================
# 1. Variables marked with __REQUIRED__ must be set for the application to work
# 2. Generate secure secrets using: openssl rand -hex 32
# 3. Never commit the actual .env file to version control
# 4. For production, use strong passwords and secure API keys
# 5. Some variables have alternative names (e.g., NODE_PORT vs NODE_BACKEND_PORT)
#    for compatibility with different parts of the codebase
# =============================================================================
